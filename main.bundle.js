(()=>{"use strict";const t={element:document.querySelector("#game-board"),height:400,width:900},e={element:document.getElementById("castle"),height:400,width:200,health:null},i=new class{constructor(){this.gameBoard=t,this.castle=e,this.fieldWidth=t.width-e.width,this.enemies=[],this.update=this.update.bind(this),this.draw=this.draw.bind(this),this.spawnEnemy=this.spawnEnemy.bind(this),this.spawnTimer=new class{constructor(t,e){this.duration=t,this.onFinish=e,this.elapsed=0}tick(t){this.elapsed+=t,this.elapsed>this.duration&&(this.onFinish(),this.reset())}reset(){this.elapsed=0}}(2e3,this.spawnEnemy)}update(t){this.spawnTimer.tick(t),this.enemies.forEach((e=>e.update(this,t)))}draw(){this.enemies.forEach((t=>t.draw()))}spawnEnemy(){const t=new class{constructor(t,e){this.element=document.createElement("div"),this.pos={x:t,y:e},this.width=50,this.height=50,this.speed=60,this.selected=!1,this.question="",this.answer="",this.element.classList.add("enemy"),this.element.style.width=`${this.width}px`,this.element.style.height=`${this.height}px`}update(t,e){this.hasHitCastle(t)?this.delete(t):this.pos.x+=this.speed*(e/1e3)}draw(){this.element.style.transform=`translate(${this.pos.x}px, ${this.pos.y}px)`}delete(t){this.element.remove(),t.deleteEnemy(this)}hasHitCastle(t){return this.pos.x>=t.fieldWidth-this.width}}(0,150);this.gameBoard.element.appendChild(t.element),this.enemies.push(t)}deleteEnemy(t){this.enemies=this.enemies.filter((e=>e!==t))}};new class{constructor(t,e){this.running=!1,this.rafID=void 0,this.update=t,this.draw=e,this.accumulatedTime=0,this.currentTime=0,this.timeStep=1e3/60,this.cycle=this.cycle.bind(this)}cycle(t){this.rafID=requestAnimationFrame(this.cycle),this.accumulatedTime+=t-this.currentTime,this.currentTime=t;let e=!1;for(this.accumulatedTime>60&&(this.accumulatedTime=this.timeStep);this.accumulatedTime>=this.timeStep;)this.update(this.timeStep),e=!0,this.accumulatedTime-=this.timeStep;e&&this.draw()}start(){this.running=!0,this.rafID=requestAnimationFrame(this.cycle)}stop(){this.running=!1,cancelAnimationFrame(this.rafID)}}(i.update,i.draw).start()})();
//# sourceMappingURL=main.bundle.js.map