(()=>{"use strict";var e={371:(e,t,n)=>{e.exports=n.p+"images/enemySpriteSheet.png"},604:(e,t,n)=>{e.exports=n.p+"images/enemySpriteSheet2.png"},233:(e,t,n)=>{e.exports=n.p+"images/enemySpriteSheet3.png"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var c=t[i]={exports:{}};return e[i](c,c.exports,n),c.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{const e={element:document.querySelector("#game-board"),height:400,width:1e3},t={height:400,width:137,lives:null,elements:{container:document.getElementById("castle"),livesText:document.getElementById("castle-lives")},setup(e){this.lives=e,this.draw()},damage(e,t){this.lives-=e,this.draw(),0===this.lives&&t()},draw(){this.elements.livesText.textContent=Math.max(0,this.lives)}};var i=n(371),r=n(604),c=n(233);const o=new Image;o.src=i;const a=new Image;a.src=r;const s=new Image;s.src=c;const u=[o,a,s];function l(){return u[Math.floor(Math.random()*u.length)]}function d(){return"2412px 98px"}const m=function({position:{x:e,y:t},speed:n,question:i,fieldWidth:r,handleSelectEnemy:c,damageCastle:o,deleteEnemy:a}={}){const s=function(){let e=0,t=0;return{sprite:l(),frameWidth:134,frameHeight:98,getRandomSpriteSheet:l,getBackgroundPosition:function(){return`-${134*t}px -0px`},getBackgroundSize:d,update:function(n){e+=n,e>50&&(t>=17?t=0:t+=1,e=0)}}}(),u=s.frameWidth,m=s.frameHeight,h={x:e,y:t},f=function(){const e=document.createElement("div"),t=document.createElement("div");return e.classList.add("enemy"),e.style.width=`${u}px`,e.style.height=`${m}px`,t.classList.add("enemy-question"),t.textContent=i.text,e.style.backgroundImage=`url(${s.sprite.src})`,e.style.backgroundPosition=s.getBackgroundPosition(),e.style.backgroundSize=s.getBackgroundSize(),e.appendChild(t),e.addEventListener("click",c),e}();function p(){a(f),f.remove()}return Object.freeze({update:function(e){if(h.x>=r-u/2)return p(),void o(1);h.x+=n*(e/1e3),s.update(e)},draw:function(){f.style.transform=`translate(${h.x}px, ${h.y}px)`,f.style.backgroundPosition=s.getBackgroundPosition()},handleDelete:p,toggleSelect:function(){f.classList.toggle("selected")},question:i,get element(){return f}})},h=function(e,t,{autoRestart:n=!0}={}){let i=e;return Object.freeze({tick:function(r){i=Math.max(0,i-r),i<=1&&(t(),n&&(i=e))},getHumanTimeRemaining:function(){const e=Math.ceil(i/1e3)%60,t=Math.floor(Math.ceil(i/1e3)/60);return`${t<10?`0${t}`:t}:${e<10?`0${e}`:e}`}})},f={easy:["+","-"],medium:["+","-","×"],hard:["+","-","×"],insane:["+","-","×","÷"]},p=e=>Math.floor(Math.random()*e),g=e=>p((e=>{switch(e){case"easy":return 5;case"medium":return 10;case"hard":return 30;case"insane":return 100;default:return 5}})(e))+1,y=e=>{const t=(e=>f[e][(e=>p(f[e].length))(e)])(e);let n=g(e),i=g(e);for(;"÷"===t&&n%i!=0;)n=g(e),i=g(e);for(;"-"===t&&n-i<0;)n=g(e),i=g(e);for(;"×"===t&&n*i>150;)n=g(e),i=g(e);for(;"+"===t&&n+i>150;)n=g(e),i=g(e);const r=`${n} ${t} ${i}`;return{text:r,answer:(e=>{const t=e.split(" "),n=Number(t[0]),i=t[1],r=Number(t[2]);let c;return c="+"===i?n+r:"-"===i?n-r:"×"===i?n*r:n/r,c})(r)}},S=document.querySelectorAll("[data-score-display]");let x=0;function E(){S.forEach((e=>{e.textContent=x}))}const T=Object.freeze({addPoints:function(e){e<0?x=Math.max(0,x+e):x+=e,E()},reset:function(){x=0,E()}}),v={SPAWN_POINTS:{FIRST_LANE:{x:-100,y:35},SECOND_LANE:{x:-100,y:135},THIRD_LANE:{x:-100,y:235}},POINTS:{CORRECT_ANSWER:10,WRONG_ANSWER:-2,CASTLE_LIFE_LOST:-10},enemySpeed:30,enemySpeedIncrement:3,spawnTimerMs:2700,gameTimerMs:3e5,questionDifficulty:"medium",castleStartingLives:3};function w(e){e.style.display="none"}function b(e,t){e.style.display=t}const q=document.querySelector("#start-page"),I=document.querySelector("#game-page"),L=document.querySelector("#game-over-page"),N=document.querySelector("#difficulty-select-page"),k=document.querySelector(".answer-form"),P=document.querySelector("#answer-input"),O=document.querySelector("#game-timer"),C=document.querySelector("#game-over-wrong-answers"),A=document.querySelector(".start-button"),R=document.querySelector("#restart-button"),M=document.querySelector(".pause-button"),$=document.querySelectorAll("[data-difficulty"),_=document.querySelector("#home-button"),D={...v},W={},j=e.width-(t.width-70),B=new class{constructor(e,t){this.running=!1,this.rafID=void 0,this.update=e,this.draw=t,this.accumulatedTime=0,this.currentTime=0,this.timeStep=1e3/60,this.cycle=this.cycle.bind(this)}cycle(e){this.rafID=requestAnimationFrame(this.cycle),this.accumulatedTime+=e-this.currentTime,this.currentTime=e;let t=!1;for(this.accumulatedTime>60&&(this.accumulatedTime=this.timeStep);this.accumulatedTime>=this.timeStep;)this.update(this.timeStep),t=!0,this.accumulatedTime-=this.timeStep;t&&this.draw()}start(){this.running=!0,this.rafID=requestAnimationFrame(this.cycle)}stop(){this.running=!1,cancelAnimationFrame(this.rafID)}}((function(e){1===z&&(Object.keys(W).forEach((t=>W[t].tick(e))),G.forEach((t=>t.update(e))))}),(function(){O.textContent=W.gameTimer.getHumanTimeRemaining(),G.forEach((e=>e.draw()))}));let z=0,F=null,H=0,G=[];function J(){const t=m({position:K(),speed:D.enemySpeed,question:y(D.questionDifficulty),fieldWidth:j,handleSelectEnemy:V,damageCastle:X,deleteEnemy:Q});D.enemySpeed+=D.enemySpeedIncrement,e.element.appendChild(t.element),G.push(t)}function K(){const e=Object.keys(D.SPAWN_POINTS);return D.SPAWN_POINTS[e[Math.floor(Math.random()*e.length)]]}function Q(e){G=G.filter((t=>t.element!==e||(F===t&&(F=null),!1)))}function U(e){if(e.preventDefault(),!F||""===P.value.trim())return;const t=F.question.answer.toString();P.value===t?(F.handleDelete(),F=null,T.addPoints(D.POINTS.CORRECT_ANSWER)):(T.addPoints(D.POINTS.WRONG_ANSWER),H+=1),P.value=""}function V(e){P.focus();const t=G.find((t=>t.element===e.currentTarget));t!==F&&(F&&F.toggleSelect(),t.toggleSelect(),F=t)}function X(e){T.addPoints(D.POINTS.CASTLE_LIFE_LOST),t.damage(e,Y)}function Y(){z=2,C.textContent=H,w(I),b(L,"flex")}function Z(){D.enemySpeed=v.enemySpeed,W.spawnTimer=h(D.spawnTimerMs,J),W.gameTimer=h(D.gameTimerMs,Y,{autoRestart:!1}),T.reset(),H=0,P.value="",t.setup(D.castleStartingLives),G.forEach((e=>e.handleDelete()))}function ee(){Z(),w(L),b(I,"flex"),z=1}function te(){const[e,t]=["Continue","Pause"];1===z?(z=3,P.disabled=!0,G.forEach((e=>e.element.classList.add("not-clickable"))),B.stop(),M.textContent=e):3===z&&(B.start(),z=1,P.disabled=!1,G.forEach((e=>e.element.classList.remove("not-clickable"))),M.textContent=t)}function ne(){w(q),b(N,"flex")}function ie(e){const t=e.target.dataset.difficulty;w(N),b(I,"flex"),function(e){Z(),D.questionDifficulty=e,z=1,B.start()}(t)}function re(){3===z&&te(),B.stop(),z=0,w(I),b(N,"flex")}Object.freeze({init:function(){A.addEventListener("click",ne),R.addEventListener("click",ee),M.addEventListener("click",te),k.addEventListener("submit",U),$.forEach((e=>e.addEventListener("click",ie))),_.addEventListener("click",re)}}).init()})()})();
//# sourceMappingURL=main.bundle.js.map